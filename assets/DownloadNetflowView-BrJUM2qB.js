import{r as h,o as L,b,d as m,e as t,m as l,v as D,p as U,q as u,s as j,h as x,x as M,F as T,f as I,i as P,t as f}from"./index-BYvS0G1V.js";import{C as B}from"./auto-De2ec26M.js";const H={class:"container-fluid"},Y={class:"row",style:{height:"630px"}},q={class:"col-3 text-dark-700 bg-light p-0"},z={class:"px-3 pt-3 scrollbar border-bottom maxh-560"},A={class:"row mb-2"},E=t("label",{for:"selectCon",class:"col-4 col-form-label"},"選擇容器",-1),R={class:"col-8"},K=t("option",{value:"all"},"所有容器",-1),Z=[K],G={class:"row mb-2"},J=t("label",{for:"selectTime",class:"col-4 col-form-label"},"過濾時段",-1),Q={class:"col-8"},W=P('<option value="15">過去15分鐘</option><option value="30">過去30分鐘</option><option value="60">過去1小時</option><option value="180">過去3小時</option><option value="720">過去12小時</option><option value="1440">過去24小時</option><option value="costom">自訂時段</option>',7),X=[W],tt={class:"row mb-2"},et=t("label",{for:"startDate",class:"col-4 col-form-label"},"開始日期",-1),st={class:"col-8"},ot={class:"row mb-2"},lt=t("label",{for:"startTime",class:"col-4 col-form-label"},"時間",-1),at={class:"col-8"},nt={class:"row mb-2"},ct=t("label",{for:"endDate",class:"col-4 col-form-label"},"結束時間",-1),it={class:"col-8"},dt={class:"row mb-2"},rt=t("label",{for:"endTime",class:"col-4 col-form-label"},"時間",-1),ut={class:"col-8"},pt=t("hr",null,null,-1),vt={class:"row mb-2"},_t=t("label",{for:"setSIP",class:"col-4 col-form-label"},"SIP",-1),ht={class:"col-8"},bt={class:"row mb-2"},mt=t("label",{for:"setSP",class:"col-4 col-form-label"},"SP",-1),ft={class:"col-8"},yt={class:"row mb-2"},xt=t("label",{for:"setDIP",class:"col-4 col-form-label"},"DIP",-1),gt={class:"col-8"},kt={class:"row mb-2"},wt=t("label",{for:"setDP",class:"col-4 col-form-label"},"DP",-1),Dt={class:"col-8"},Tt=t("hr",null,null,-1),Pt={class:"row mb-2"},$t=t("label",{for:"showLists",class:"col-2 col-form-label pe-0"},"筆數",-1),Vt={class:"col-4"},Ct=t("label",{for:"setNum",class:"col-2 col-form-label pe-0"},"倍數",-1),St={class:"col-4"},Ut={class:"row align-items-center mb-4"},Mt=t("label",{for:"selectOrder",class:"col-2 col-form-label pe-0"},"排序",-1),It={class:"col-6"},Ft=t("option",null,"Octets",-1),Ot=t("option",null,"Flows",-1),Nt=t("option",null,"Packets",-1),Lt=[Ft,Ot,Nt],jt={class:"col-4"},Bt=t("label",{for:"checkbox01",class:"form-check-label me-1"},"IP反解析",-1),Ht={class:"d-flex justify-content-end p-3"},Yt={key:0,class:"col-9 d-flex justify-content-center h-100"},qt=t("div",{class:"align-self-center text-center text-dark-700"},[t("i",{class:"icon-weishang-toolicon-box fs-1 mb-3"}),t("p",{class:"fs-4"},"尚無資料")],-1),zt=[qt],At={class:"col-9 py-3 d-flex flex-column h-100"},Et={class:"px-2"},Rt=P('<button type="button" class="btn text-light border-0 p-0 me-2"><i class="icon-weishang-toolicon-fileHTML fs-3"></i></button><button type="button" class="btn text-light border-0 p-0 me-4"><i class="icon-weishang-toolicon-filePDF fs-3"></i></button><h4 class="d-inline">inside_download 下載流量_報表</h4>',3),Kt={class:"row px-2"},Zt={class:"col-8 d-flex flex-column"},Gt=t("div",{class:"flex-fill align-content-center"},[t("div",{style:{height:"360px"}},[t("canvas",{id:"chart"})])],-1),Jt={class:"text-dark-700 bg-info py-2"},Qt={width:"100%"},Wt={class:"border-top border-dark-600",style:{"font-size":"14px"}},Xt={class:"px-3 py-1",style:{width:"150px"}},te={class:"px-3 py-1 border-start border-dark-600 bg-light"},ee={class:"px-3 py-1 border-start border-dark-600",style:{width:"150px"}},se={class:"px-3 py-1 border-start border-dark-600 bg-light"},oe={class:"col-4"},le={class:"text-dark-700 bg-light text-center",style:{height:"563px"}},ae=P('<div class="d-flex talbe-head bg-info pt-3 pb-1 px-2" style="height:40px;font-size:0.8rem;"><div class="col-5 text-start ps-2">Dst Host</div><div class="col-2">Flows</div><div class="col-3">Octets</div><div class="col-2">Packets</div></div>',1),ne={class:"table-body scrollbar px-2 maxh-523"},ce={class:"col-5 text-start ps-2"},ie=t("div",{class:"col-2"},"156",-1),de=t("div",{class:"col-3"},"42.34 KB",-1),re=t("div",{class:"col-2"},"156",-1),_e={__name:"DownloadNetflowView",setup(ue){const a=p=>String(p).padStart(2,"0"),e=h({container:"all",catchTime:15,sDate:"",sTime:"",eDate:"",eTime:"",sip:"",sp:"",dip:"",dp:"",rows:10,double:0,sort:"Octets",ipParse:!1}),F=()=>{e.value={container:"all",catchTime:15,sDate:"",sTime:"",eDate:"",eTime:"",sip:"",sp:"",dip:"",dp:"",rows:10,double:0,sort:"Octets",ipParse:!1}},O=h([{key:"name",title:"報表 Report",content:""},{key:"sort",title:"排序",content:""},{key:"sTime",title:"開始時間",content:""},{key:"eTime",title:"結束時間",content:""},{key:"container",title:"分析容器",content:""},{key:"exp",title:"輸出設備",content:""},{key:"sip",title:"來源 IPs",content:""},{key:"dip",title:"目的 IPs",content:""},{key:"sp",title:"來源 Ports",content:""},{key:"dp",title:"目的 Ports",content:""},{key:"rows",title:"顯示行數",content:0},{key:"size",title:"最小資料大小",content:0}]),d=h([]),g=h(0),$=h(["#4dc9f6","#f67019","#f53794","#537bc4","#acc236","#166a8f","#00a950","#58595b","#8549ba"]);let k,y,V;return L(()=>{const p=new Date,o=document.querySelectorAll('input[type="date"]'),s=document.querySelector("#chart"),n=new B(s,{type:"doughnut",data:{labels:[],datasets:[{data:[],hoverOffset:5}]},options:{plugins:{legend:{display:!1}},layout:{padding:20}}});o.forEach(c=>{c.setAttribute("max",`${p.getFullYear()}-${a(p.getMonth()+1)}-${a(p.getDate())}`),c.setAttribute("value",`${p.getFullYear()}-${a(p.getMonth()+1)}-${a(p.getDate())}`)}),k=()=>{const c=h({labels:[],values:[],colors:[]});y(),d.value=[{key:"name",content:"Destination IP"}];const N=O.value.reduce((r,_)=>{var S;const w=h(!1),C=d.value.findIndex(v=>v.key===_.key);if(C>=0&&(r.push(Object.assign({},_,d.value[C])),w.value=!0),((S=e.value)==null?void 0:S[_.key])!==void 0){const v=h();switch(_.key){case"sTime":if(e.value.catchTime!="costom"){const i=new Date(Date.now()-e.value.catchTime*1e3*60);v.value=`${i.getFullYear()}-${a(i.getMonth()+1)}-${a(i.getDate())}  ${a(i.getHours())}:${a(i.getMinutes())}`}else v.value=`${e.value.sDate} ${e.value.sTime}`;break;case"eTime":if(e.value.catchTime!="costom"){const i=new Date;v.value=`${i.getFullYear()}-${a(i.getMonth()+1)}-${a(i.getDate())}  ${a(i.getHours())}:${a(i.getMinutes())}`}else v.value=`${e.value.eDate} ${e.value.eTime}`;break;case"rows":g.value=e.value.rows,v.value=e.value[_.key];break;default:v.value=e.value[_.key]}r.push(Object.assign({},_,{content:v.value})),w.value=!0}return w.value||r.push(_),r},[]);d.value=N;for(let r=1;r<=e.value.rows;r++)c.value.labels.push(r),c.value.values.push(r*Math.floor(Math.random()*3)+1),c.value.colors.push($.value[r%$.value.length]);V(c.value)},y=()=>{d.value.length=0,g.value=0,n.data.datasets.pop(),n.update()},V=c=>{n.data.labels=c.labels,n.data.datasets.push({data:c.values,backgroundColor:c.colors}),n.update(),s.classList.add("m-auto")}}),(p,o)=>(b(),m("div",H,[t("div",Y,[t("div",q,[t("form",z,[t("div",A,[E,t("div",R,[l(t("select",{id:"selectCon",class:"form-select","onUpdate:modelValue":o[0]||(o[0]=s=>e.value.container=s)},Z,512),[[D,e.value.container]])])]),t("div",G,[J,t("div",Q,[l(t("select",{id:"selectTime",class:"form-select","onUpdate:modelValue":o[1]||(o[1]=s=>e.value.catchTime=s)},X,512),[[D,e.value.catchTime]])])]),l(t("div",null,[t("div",tt,[et,t("div",st,[l(t("input",{type:"date",class:"form-control",id:"startDate","onUpdate:modelValue":o[2]||(o[2]=s=>e.value.sDate=s)},null,512),[[u,e.value.sDate]])])]),t("div",ot,[lt,t("div",at,[l(t("input",{type:"time",class:"form-control",id:"startTime","onUpdate:modelValue":o[3]||(o[3]=s=>e.value.sTime=s)},null,512),[[u,e.value.sTime]])])]),t("div",nt,[ct,t("div",it,[l(t("input",{type:"date",class:"form-control",id:"endDate","onUpdate:modelValue":o[4]||(o[4]=s=>e.value.eDate=s)},null,512),[[u,e.value.eDate]])])]),t("div",dt,[rt,t("div",ut,[l(t("input",{type:"time",class:"form-control",id:"endTime","onUpdate:modelValue":o[5]||(o[5]=s=>e.value.eTime=s)},null,512),[[u,e.value.eTime]])])])],512),[[U,e.value.catchTime==="costom"]]),pt,t("div",vt,[_t,t("div",ht,[l(t("input",{type:"text",class:"form-control",id:"setSIP","onUpdate:modelValue":o[6]||(o[6]=s=>e.value.sip=s)},null,512),[[u,e.value.sip]])])]),t("div",bt,[mt,t("div",ft,[l(t("input",{type:"text",class:"form-control",id:"setSP","onUpdate:modelValue":o[7]||(o[7]=s=>e.value.sp=s)},null,512),[[u,e.value.sp]])])]),t("div",yt,[xt,t("div",gt,[l(t("input",{type:"text",class:"form-control",id:"setDIP","onUpdate:modelValue":o[8]||(o[8]=s=>e.value.dip=s)},null,512),[[u,e.value.dip]])])]),t("div",kt,[wt,t("div",Dt,[l(t("input",{type:"text",class:"form-control",id:"setDP","onUpdate:modelValue":o[9]||(o[9]=s=>e.value.dp=s)},null,512),[[u,e.value.dp]])])]),Tt,t("div",Pt,[$t,t("div",Vt,[l(t("input",{type:"text",class:"form-control",id:"showLists","onUpdate:modelValue":o[10]||(o[10]=s=>e.value.rows=s)},null,512),[[u,e.value.rows,void 0,{number:!0}]])]),Ct,t("div",St,[l(t("input",{type:"text",class:"form-control",id:"setNum","onUpdate:modelValue":o[11]||(o[11]=s=>e.value.double=s)},null,512),[[u,e.value.double]])])]),t("div",Ut,[Mt,t("div",It,[l(t("select",{id:"selectOrder",class:"form-select","onUpdate:modelValue":o[12]||(o[12]=s=>e.value.sort=s)},Lt,512),[[D,e.value.sort]])]),t("div",jt,[Bt,l(t("input",{type:"checkbox",class:"form-check-input",id:"checkbox01","onUpdate:modelValue":o[13]||(o[13]=s=>e.value.ipParse=s)},null,512),[[j,e.value.ipParse]])])])]),t("div",Ht,[t("button",{type:"button",class:"btn btn-secondary me-2",onClick:o[14]||(o[14]=(...s)=>x(k)&&x(k)(...s))},"確認"),t("button",{type:"button",class:"btn btn-outline-dark-700",onClick:F},"清除")])]),d.value.length?M("",!0):(b(),m("div",Yt,zt)),l(t("div",At,[t("div",Et,[Rt,t("button",{type:"button",class:"btn-close btn-close-white float-end","aria-label":"Close",onClick:o[15]||(o[15]=(...s)=>x(y)&&x(y)(...s))})]),t("div",Kt,[t("div",Zt,[Gt,t("div",Jt,[t("table",Qt,[t("tbody",Wt,[(b(!0),m(T,null,I(d.value,(s,n)=>(b(),m("tr",{class:"border-bottom border-dark-600",key:n},[n%2?M("",!0):(b(),m(T,{key:0},[t("td",Xt,f(s.title),1),t("td",te,f(s.content),1),t("td",ee,f(d.value[n+1].title),1),t("td",se,f(d.value[n+1].content),1)],64))]))),128))])])])]),t("div",oe,[t("div",le,[ae,t("ul",ne,[(b(!0),m(T,null,I(g.value,(s,n)=>(b(),m("li",{class:"d-flex border-bottom py-2",key:n},[t("div",ce,f(`192.168.${s}.136`),1),ie,de,re]))),128))])])])])],512),[[U,d.value.length]])])]))}};export{_e as default};
