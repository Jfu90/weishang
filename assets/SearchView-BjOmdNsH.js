import{r as h,o as N,b,d as m,e as t,m as l,v as D,p as O,q as u,s as j,h as g,x as U,F as T,f as M,i as P,t as f}from"./index-BYvS0G1V.js";import{C as B}from"./auto-De2ec26M.js";const H={class:"container-fluid"},Y={class:"row",style:{height:"630px"}},q={class:"col-3 text-dark-700 bg-light p-0"},z={class:"px-3 pt-3 scrollbar border-bottom maxh-560"},A={class:"accordion"},E={class:"accordion-item border-0 bg-light"},R=t("h2",{class:"accordion-header",id:"headingOne"},[t("button",{class:"accordion-button px-0 py-2 bg-light shadow-none rounded-0",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne"}," 容器 & 時間 ")],-1),K={id:"collapseOne",class:"accordion-collapse collapse show","aria-labelledby":"headingOne"},Z={class:"accordion-body px-0 py-2"},G={class:"row mb-2"},J=t("label",{for:"selectCon",class:"col-4 col-form-label"},"選擇容器",-1),Q={class:"col-8"},W=t("option",{value:"all"},"所有容器",-1),X=[W],tt={class:"row mb-2"},et=t("label",{for:"selectTime",class:"col-4 col-form-label"},"過濾時段",-1),st={class:"col-8"},ot=P('<option value="15">過去15分鐘</option><option value="30">過去30分鐘</option><option value="60">過去1小時</option><option value="180">過去3小時</option><option value="720">過去12小時</option><option value="1440">過去24小時</option><option value="costom">自訂時段</option>',7),lt=[ot],at={class:"row mb-2"},ct=t("label",{for:"startDate",class:"col-4 col-form-label"},"開始日期",-1),nt={class:"col-8"},it={class:"row mb-2"},dt=t("label",{for:"startTime",class:"col-4 col-form-label"},"時間",-1),rt={class:"col-8"},ut={class:"row mb-2"},pt=t("label",{for:"endDate",class:"col-4 col-form-label"},"結束時間",-1),vt={class:"col-8"},_t={class:"row mb-2"},ht=t("label",{for:"endTime",class:"col-4 col-form-label"},"時間",-1),bt={class:"col-8"},mt=t("hr",null,null,-1),ft={class:"accordion-item border-0 bg-light"},yt=t("h2",{class:"accordion-header",id:"headingTwo"},[t("button",{class:"accordion-button collapsed px-0 py-2 bg-light shadow-none rounded-0",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-expanded":"false","aria-controls":"collapseTwo"}," 設置區段 ")],-1),gt={id:"collapseTwo",class:"accordion-collapse collapse","aria-labelledby":"headingTwo"},xt={class:"accordion-body px-0 py-2"},wt={class:"row mb-2"},kt=t("label",{for:"setSIP",class:"col-4 col-form-label"},"SIP",-1),Dt={class:"col-8"},Tt={class:"row mb-2"},Pt=t("label",{for:"setSP",class:"col-4 col-form-label"},"SP",-1),$t={class:"col-8"},Vt={class:"row mb-2"},Ct=t("label",{for:"setDIP",class:"col-4 col-form-label"},"DIP",-1),St={class:"col-8"},Ot={class:"row mb-2"},Ut=t("label",{for:"setDP",class:"col-4 col-form-label"},"DP",-1),Mt={class:"col-8"},It=t("hr",null,null,-1),Ft={class:"row mb-2"},Lt=t("label",{for:"showLists",class:"col-2 col-form-label pe-0"},"筆數",-1),Nt={class:"col-4"},jt=t("label",{for:"setNum",class:"col-2 col-form-label pe-0"},"倍數",-1),Bt={class:"col-4"},Ht={class:"row align-items-center mb-4"},Yt=t("label",{for:"selectOrder",class:"col-2 col-form-label pe-0"},"排序",-1),qt={class:"col-6"},zt=t("option",null,"Octets",-1),At=t("option",null,"Flows",-1),Et=t("option",null,"Packets",-1),Rt=[zt,At,Et],Kt={class:"col-4"},Zt=t("label",{for:"checkbox01",class:"form-check-label me-1"},"IP反解析",-1),Gt={class:"d-flex justify-content-end p-3"},Jt={key:0,class:"col-9 d-flex justify-content-center h-100"},Qt=t("div",{class:"align-self-center text-center text-dark-700"},[t("i",{class:"icon-weishang-toolicon-box fs-1 mb-3"}),t("p",{class:"fs-4"},"尚無資料")],-1),Wt=[Qt],Xt={class:"col-9 py-3 d-flex flex-column h-100"},te={class:"px-2"},ee=P('<button type="button" class="btn text-light border-0 p-0 me-2"><i class="icon-weishang-toolicon-fileHTML fs-3"></i></button><button type="button" class="btn text-light border-0 p-0 me-4"><i class="icon-weishang-toolicon-filePDF fs-3"></i></button><h4 class="d-inline">inside_download 下載流量_報表</h4>',3),se={class:"row px-2"},oe={class:"col-8 d-flex flex-column"},le=t("div",{class:"flex-fill align-content-center"},[t("div",{style:{height:"360px"}},[t("canvas",{id:"chart"})])],-1),ae={class:"text-dark-700 bg-info py-2"},ce={width:"100%"},ne={class:"border-top border-dark-600",style:{"font-size":"14px"}},ie={class:"px-3 py-1",style:{width:"150px"}},de={class:"px-3 py-1 border-start border-dark-600 bg-light"},re={class:"px-3 py-1 border-start border-dark-600",style:{width:"150px"}},ue={class:"px-3 py-1 border-start border-dark-600 bg-light"},pe={class:"col-4"},ve={class:"text-dark-700 bg-light text-center",style:{height:"563px"}},_e=P('<div class="d-flex talbe-head bg-info pt-3 pb-1 px-2" style="height:40px;font-size:0.8rem;"><div class="col-5 text-start ps-2">Dst Host</div><div class="col-2">Flows</div><div class="col-3">Octets</div><div class="col-2">Packets</div></div>',1),he={class:"table-body scrollbar px-2 maxh-523"},be={class:"col-5 text-start ps-2"},me=t("div",{class:"col-2"},"156",-1),fe=t("div",{class:"col-3"},"42.34 KB",-1),ye=t("div",{class:"col-2"},"156",-1),ke={__name:"SearchView",setup(ge){const a=p=>String(p).padStart(2,"0"),e=h({container:"all",catchTime:15,sDate:"",sTime:"",eDate:"",eTime:"",sip:"",sp:"",dip:"",dp:"",rows:10,double:0,sort:"Octets",ipParse:!1}),I=()=>{e.value={container:"all",catchTime:15,sDate:"",sTime:"",eDate:"",eTime:"",sip:"",sp:"",dip:"",dp:"",rows:10,double:0,sort:"Octets",ipParse:!1}},F=h([{key:"name",title:"報表 Report",content:""},{key:"sort",title:"排序",content:""},{key:"sTime",title:"開始時間",content:""},{key:"eTime",title:"結束時間",content:""},{key:"container",title:"分析容器",content:""},{key:"exp",title:"輸出設備",content:""},{key:"sip",title:"來源 IPs",content:""},{key:"dip",title:"目的 IPs",content:""},{key:"sp",title:"來源 Ports",content:""},{key:"dp",title:"目的 Ports",content:""},{key:"rows",title:"顯示行數",content:0},{key:"size",title:"最小資料大小",content:0}]),d=h([]),x=h(0),$=h(["#4dc9f6","#f67019","#f53794","#537bc4","#acc236","#166a8f","#00a950","#58595b","#8549ba"]);let w,y,V;return N(()=>{const p=new Date,o=document.querySelectorAll('input[type="date"]'),s=document.querySelector("#chart"),c=new B(s,{type:"doughnut",data:{labels:[],datasets:[{data:[],hoverOffset:5}]},options:{plugins:{legend:{display:!1}},layout:{padding:20}}});o.forEach(n=>{n.setAttribute("max",`${p.getFullYear()}-${a(p.getMonth()+1)}-${a(p.getDate())}`),n.setAttribute("value",`${p.getFullYear()}-${a(p.getMonth()+1)}-${a(p.getDate())}`)}),w=()=>{const n=h({labels:[],values:[],colors:[]});y(),d.value=[{key:"name",content:"Destination IP"}];const L=F.value.reduce((r,_)=>{var S;const k=h(!1),C=d.value.findIndex(v=>v.key===_.key);if(C>=0&&(r.push(Object.assign({},_,d.value[C])),k.value=!0),((S=e.value)==null?void 0:S[_.key])!==void 0){const v=h();switch(_.key){case"sTime":if(e.value.catchTime!="costom"){const i=new Date(Date.now()-e.value.catchTime*1e3*60);v.value=`${i.getFullYear()}-${a(i.getMonth()+1)}-${a(i.getDate())}  ${a(i.getHours())}:${a(i.getMinutes())}`}else v.value=`${e.value.sDate} ${e.value.sTime}`;break;case"eTime":if(e.value.catchTime!="costom"){const i=new Date;v.value=`${i.getFullYear()}-${a(i.getMonth()+1)}-${a(i.getDate())}  ${a(i.getHours())}:${a(i.getMinutes())}`}else v.value=`${e.value.eDate} ${e.value.eTime}`;break;case"rows":x.value=e.value.rows,v.value=e.value[_.key];break;default:v.value=e.value[_.key]}r.push(Object.assign({},_,{content:v.value})),k.value=!0}return k.value||r.push(_),r},[]);d.value=L;for(let r=1;r<=e.value.rows;r++)n.value.labels.push(r),n.value.values.push(r*Math.floor(Math.random()*3)+1),n.value.colors.push($.value[r%$.value.length]);V(n.value)},y=()=>{d.value.length=0,x.value=0,c.data.datasets.pop(),c.update()},V=n=>{c.data.labels=n.labels,c.data.datasets.push({data:n.values,backgroundColor:n.colors}),c.update(),s.classList.add("m-auto")}}),(p,o)=>(b(),m("div",H,[t("div",Y,[t("div",q,[t("form",z,[t("div",A,[t("div",E,[R,t("div",K,[t("div",Z,[t("div",G,[J,t("div",Q,[l(t("select",{id:"selectCon",class:"form-select","onUpdate:modelValue":o[0]||(o[0]=s=>e.value.container=s)},X,512),[[D,e.value.container]])])]),t("div",tt,[et,t("div",st,[l(t("select",{id:"selectTime",class:"form-select","onUpdate:modelValue":o[1]||(o[1]=s=>e.value.catchTime=s)},lt,512),[[D,e.value.catchTime]])])]),l(t("div",null,[t("div",at,[ct,t("div",nt,[l(t("input",{type:"date",class:"form-control",id:"startDate","onUpdate:modelValue":o[2]||(o[2]=s=>e.value.sDate=s)},null,512),[[u,e.value.sDate]])])]),t("div",it,[dt,t("div",rt,[l(t("input",{type:"time",class:"form-control",id:"startTime","onUpdate:modelValue":o[3]||(o[3]=s=>e.value.sTime=s)},null,512),[[u,e.value.sTime]])])]),t("div",ut,[pt,t("div",vt,[l(t("input",{type:"date",class:"form-control",id:"endDate","onUpdate:modelValue":o[4]||(o[4]=s=>e.value.eDate=s)},null,512),[[u,e.value.eDate]])])]),t("div",_t,[ht,t("div",bt,[l(t("input",{type:"time",class:"form-control",id:"endTime","onUpdate:modelValue":o[5]||(o[5]=s=>e.value.eTime=s)},null,512),[[u,e.value.eTime]])])])],512),[[O,e.value.catchTime==="costom"]])])])]),mt,t("div",ft,[yt,t("div",gt,[t("div",xt,[t("div",wt,[kt,t("div",Dt,[l(t("input",{type:"text",class:"form-control",id:"setSIP","onUpdate:modelValue":o[6]||(o[6]=s=>e.value.sip=s)},null,512),[[u,e.value.sip]])])]),t("div",Tt,[Pt,t("div",$t,[l(t("input",{type:"text",class:"form-control",id:"setSP","onUpdate:modelValue":o[7]||(o[7]=s=>e.value.sp=s)},null,512),[[u,e.value.sp]])])]),t("div",Vt,[Ct,t("div",St,[l(t("input",{type:"text",class:"form-control",id:"setDIP","onUpdate:modelValue":o[8]||(o[8]=s=>e.value.dip=s)},null,512),[[u,e.value.dip]])])]),t("div",Ot,[Ut,t("div",Mt,[l(t("input",{type:"text",class:"form-control",id:"setDP","onUpdate:modelValue":o[9]||(o[9]=s=>e.value.dp=s)},null,512),[[u,e.value.dp]])])])])])])]),It,t("div",Ft,[Lt,t("div",Nt,[l(t("input",{type:"text",class:"form-control",id:"showLists","onUpdate:modelValue":o[10]||(o[10]=s=>e.value.rows=s)},null,512),[[u,e.value.rows,void 0,{number:!0}]])]),jt,t("div",Bt,[l(t("input",{type:"text",class:"form-control",id:"setNum","onUpdate:modelValue":o[11]||(o[11]=s=>e.value.double=s)},null,512),[[u,e.value.double]])])]),t("div",Ht,[Yt,t("div",qt,[l(t("select",{id:"selectOrder",class:"form-select","onUpdate:modelValue":o[12]||(o[12]=s=>e.value.sort=s)},Rt,512),[[D,e.value.sort]])]),t("div",Kt,[Zt,l(t("input",{type:"checkbox",class:"form-check-input",id:"checkbox01","onUpdate:modelValue":o[13]||(o[13]=s=>e.value.ipParse=s)},null,512),[[j,e.value.ipParse]])])])]),t("div",Gt,[t("button",{type:"button",class:"btn btn-secondary me-2",onClick:o[14]||(o[14]=(...s)=>g(w)&&g(w)(...s))},"確認"),t("button",{type:"button",class:"btn btn-outline-dark-700",onClick:I},"清除")])]),d.value.length?U("",!0):(b(),m("div",Jt,Wt)),l(t("div",Xt,[t("div",te,[ee,t("button",{type:"button",class:"btn-close btn-close-white float-end","aria-label":"Close",onClick:o[15]||(o[15]=(...s)=>g(y)&&g(y)(...s))})]),t("div",se,[t("div",oe,[le,t("div",ae,[t("table",ce,[t("tbody",ne,[(b(!0),m(T,null,M(d.value,(s,c)=>(b(),m("tr",{class:"border-bottom border-dark-600",key:c},[c%2?U("",!0):(b(),m(T,{key:0},[t("td",ie,f(s.title),1),t("td",de,f(s.content),1),t("td",re,f(d.value[c+1].title),1),t("td",ue,f(d.value[c+1].content),1)],64))]))),128))])])])]),t("div",pe,[t("div",ve,[_e,t("ul",he,[(b(!0),m(T,null,M(x.value,(s,c)=>(b(),m("li",{class:"d-flex border-bottom py-2",key:c},[t("div",be,f(`192.168.${s}.136`),1),me,fe,ye]))),128))])])])])],512),[[O,d.value.length]])])]))}};export{ke as default};
